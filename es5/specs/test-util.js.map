{"version":3,"sources":["../../src/specs/test-util.js"],"names":["require","errorToJson","expectError","e1","e2","ne1","Error","ne2","be1","get","constructor","name","be2","oe1","omitStack","oe2","expect","toEqual","s","stack","fn","e","undefined","sleep","ms","Promise","setTimeout","resolve","module","exports"],"mappings":";;eAAwBA,QAAQ,SAAR,C;IAAhBC,W,YAAAA,W;;AAER,SAASC,WAAT,CAAqBC,EAArB,EAAyBC,EAAzB,EAA6B;AAC3B,MAAMC,MAAM,OAAOF,EAAP,KAAc,QAAd,GAAyB,IAAIG,KAAJ,CAAUH,EAAV,CAAzB,GAAyCA,EAArD;AACA,MAAMI,MAAM,OAAOH,EAAP,KAAc,QAAd,GAAyB,IAAIE,KAAJ,CAAUF,EAAV,CAAzB,GAAyCA,EAArD;AACA,MAAMI,MAAMC,IAAI;AAAA,WAAML,GAAGM,WAAH,CAAeC,IAArB;AAAA,GAAJ,IAAiCV,YAAYI,GAAZ,CAAjC,GAAoDA,GAAhE;AACA,MAAMO,MAAMH,IAAI;AAAA,WAAMN,GAAGO,WAAH,CAAeC,IAArB;AAAA,GAAJ,IAAiCV,YAAYM,GAAZ,CAAjC,GAAoDA,GAAhE;AACA,MAAMM,MAAMC,UAAUN,GAAV,CAAZ;AACA,MAAMO,MAAMD,UAAUF,GAAV,CAAZ;AACAI,SAAOH,GAAP,EAAYI,OAAZ,CAAoBF,GAApB;AACD;;AAED,SAASD,SAAT,CAAmBI,CAAnB,EAAsB;AACpB,SAAOA,EAAEC,KAAT;AACA,SAAOD,CAAP;AACD;;AAED,SAAST,GAAT,CAAaW,EAAb,EAAiB;AACf,MAAI;AACF,WAAOA,IAAP;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU;AACV,WAAOC,SAAP;AACD;AACF;;AAED,SAASC,KAAT,CAAeC,EAAf,EAAmB;AACjB,SAAO,IAAIC,OAAJ,CAAY,mBAAW;AAC5BC,eAAWC,OAAX,EAAoBH,EAApB;AACD,GAFM,CAAP;AAGD;;AAEDI,OAAOC,OAAP,GAAiB;AACf3B,0BADe;AAEfqB;AAFe,CAAjB","file":"test-util.js","sourcesContent":["const { errorToJson } = require('../util')\n\nfunction expectError(e1, e2) {\n  const ne1 = typeof e1 === 'string' ? new Error(e1) : e1\n  const ne2 = typeof e2 === 'string' ? new Error(e2) : e2\n  const be1 = get(() => e2.constructor.name) ? errorToJson(ne1) : ne1\n  const be2 = get(() => e1.constructor.name) ? errorToJson(ne2) : ne2\n  const oe1 = omitStack(be1)\n  const oe2 = omitStack(be2)\n  expect(oe1).toEqual(oe2)\n}\n\nfunction omitStack(s) {\n  delete s.stack\n  return s\n}\n\nfunction get(fn) {\n  try {\n    return fn()\n  } catch (e) {\n    return undefined\n  }\n}\n\nfunction sleep(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms)\n  })\n}\n\nmodule.exports = {\n  expectError,\n  sleep\n}\n"]}